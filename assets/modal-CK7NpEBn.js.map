{"version":3,"file":"modal-CK7NpEBn.js","sources":["../../src/js/products-api.js","../../src/js/render-function.js","../../src/js/modal.js"],"sourcesContent":["// Функції для роботи з бекендом\n\nimport axios from 'axios';\nimport iziToast from 'izitoast';\n\naxios.defaults.baseURL = 'https://dummyjson.com';\n\nexport async function fetchCategories() {\n  try {\n    const { data } = await axios('/products/categories');\n\n    return data;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n\nexport async function fetchProducts(currentPage = 1) {\n  const url = `/products?limit=12&skip=${(currentPage - 1) * 12}`;\n  try {\n    const { data } = await axios(url);\n\n    return data.products;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n\nexport async function fetchProductByCategory(category, currentPage = 1) {\n  try {\n    const { data } = await axios(\n      `/products/category/${category}?limit=12&skip=${(currentPage - 1) * 12}`\n    );\n    return data.products;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n\nexport async function fetchProductById(id) {\n  try {\n    const { data } = await axios(`/products/${id}`);\n    return data;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n    throw error;\n  }\n}\n\nexport async function fetchProductByName(name) {\n  try {\n    const { data } = await axios(`/products/search?q=${name}&limit=12`);\n    return data.products;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport { refs } from './refs';\nimport {\n  fetchCategories,\n  fetchProductByCategory,\n  fetchProducts,\n} from './products-api';\n\nexport function createMarkupCategoriesList(arr) {\n  return arr\n    .map(\n      ({ name }) => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${name}</button></li>`\n    )\n    .join('');\n}\n\nexport const categoryList = async () => {\n  const data = await fetchCategories();\n  data.unshift({ name: 'ALL' });\n  refs.categoriesList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupCategoriesList(data)\n  );\n};\n\nexport function createMarkupProductsList(arr) {\n  return arr\n    .map(\n      ({\n        id,\n        images,\n        description,\n        title,\n        brand,\n        category,\n        price,\n      }) => `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${images[0]}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n    <p class=\"products__category\">Category:${category} </p>\n    <p class=\"products__price\">Price:${price} $</p>\n </li>\n`\n    )\n    .join('');\n}\n\nexport const productsList = async () => {\n  const data = await fetchProducts();\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(data)\n  );\n};\n\nexport function productListForCart(data) {\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(data)\n  );\n}\n\nexport function productsListByCategory(data) {\n  refs.productsList.innerHTML = '';\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(data)\n  );\n}\n\nexport function modalProductById({\n  images,\n  description,\n  title,\n  tags,\n  returnPolicy,\n  price,\n  shippingInformation,\n}) {\n  return `<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${description}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tags}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy:${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price:${price} $</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n`;\n}\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\n\nimport { STORAGE_KEYS } from './constants';\nimport { fetchProductById } from './products-api';\nimport { refs } from './refs';\nimport { modalProductById } from './render-function';\nimport { addToCart, removeFromCart } from './storage';\n\nlet onCartBtnClick = null;\nlet onWishBtnClick = null;\nexport const handleClickOnProductCard = async event => {\n  const productCard = event.target;\n  if (!productCard.closest('.products__item')) {\n    return;\n  }\n  const id = +productCard.closest('.products__item').dataset.id;\n  const productById = await fetchProductById(id);\n  const productModalWindow = modalProductById(productById);\n\n  refs.modalProduct.innerHTML = productModalWindow;\n  refs.modal.classList.add('modal--is-open');\n\n  let cartList = JSON.parse(localStorage.getItem(STORAGE_KEYS.CARD_KEY)) || [];\n\n  const cardListBtn = document.querySelector('.modal-product__btn--cart');\n\n  // Встановлюємо початковий текст кнопки\n  cardListBtn.textContent = cartList.includes(id)\n    ? 'Remove from Cart'\n    : 'Add to Cart';\n\n  // Створюємо функцію обробника та зберігаємо її для подальшого видалення\n  onCartBtnClick = () => {\n    if (!cartList.includes(id)) {\n      cardListBtn.textContent = 'Remove from Cart';\n      cartList.push(id);\n      localStorage.setItem(STORAGE_KEYS.CARD_KEY, JSON.stringify(cartList));\n      refs.itemsValue.textContent = cartList.length;\n    } else {\n      cardListBtn.textContent = 'Add to Cart';\n      cartList = cartList.filter(currentId => currentId !== id);\n      localStorage.setItem(STORAGE_KEYS.CARD_KEY, JSON.stringify(cartList));\n      refs.itemsValue.textContent = cartList.length;\n    }\n  };\n  // Додаємо слухача\n  cardListBtn.addEventListener('click', onCartBtnClick);\n\n  const wishListBtn = document.querySelector('.modal-product__btn--wishlist');\n  let wishList = JSON.parse(localStorage.getItem(STORAGE_KEYS.WISH_KEY)) || [];\n\n  wishListBtn.textContent = wishList.includes(id)\n    ? 'Remove from Wishlist'\n    : 'Add to Wishlist';\n\n  onWishBtnClick = () => {\n    if (!wishList.includes(id)) {\n      wishListBtn.textContent = 'Remove from Wishlist';\n      wishList.push(id);\n      localStorage.setItem(STORAGE_KEYS.WISH_KEY, JSON.stringify(wishList));\n      refs.itemsWishValue.textContent = wishList.length;\n    } else {\n      wishListBtn.textContent = 'Add to Wishlist';\n      wishList = wishList.filter(currentId => currentId !== id);\n      localStorage.setItem(STORAGE_KEYS.WISH_KEY, JSON.stringify(wishList));\n      refs.itemsWishValue.textContent = wishList.length;\n    }\n  };\n  wishListBtn.addEventListener('click', onWishBtnClick);\n};\nexport const closeModal = () => {\n  refs.modal.classList.remove('modal--is-open');\n  const cardListBtn = document.querySelector('.modal-product__btn--cart');\n  if (cardListBtn && onCartBtnClick) {\n    cardListBtn.removeEventListener('click', onCartBtnClick);\n    onCartBtnClick = null; // обнуляємо, щоб не тримати зайве\n  }\n  const wishListBtn = document.querySelector('.modal-product__btn--wishlist');\n  if (wishListBtn && onWishBtnClick) {\n    wishListBtn.removeEventListener('click', onWishBtnClick);\n    onWishBtnClick = null;\n  }\n};\n"],"names":["axios","fetchCategories","data","error","iziToast","fetchProducts","currentPage","url","fetchProductByCategory","category","fetchProductById","id","fetchProductByName","name","createMarkupCategoriesList","arr","categoryList","refs","createMarkupProductsList","images","description","title","brand","price","productsList","productListForCart","productsListByCategory","modalProductById","tags","returnPolicy","shippingInformation","onCartBtnClick","onWishBtnClick","handleClickOnProductCard","event","productCard","productById","productModalWindow","cartList","STORAGE_KEYS","cardListBtn","currentId","wishListBtn","wishList","closeModal"],"mappings":"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"}