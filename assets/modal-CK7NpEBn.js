import{r,S as i}from"./refs-C_pHe5Cm.js";import{a as d,i as _}from"./vendor-CJ_tX8LA.js";d.defaults.baseURL="https://dummyjson.com";async function h(){try{const{data:t}=await d("/products/categories");return t}catch(t){_.error({message:t.message,position:"topRight"})}}async function y(t=1){const s=`/products?limit=12&skip=${(t-1)*12}`;try{const{data:e}=await d(s);return e.products}catch(e){_.error({message:e.message,position:"topRight"})}}async function w(t,s=1){try{const{data:e}=await d(`/products/category/${t}?limit=12&skip=${(s-1)*12}`);return e.products}catch(e){_.error({message:e.message,position:"topRight"})}}async function L(t){try{const{data:s}=await d(`/products/${t}`);return s}catch(s){throw _.error({message:s.message,position:"topRight"}),s}}async function R(t){try{const{data:s}=await d(`/products/search?q=${t}&limit=12`);return s.products}catch(s){_.error({message:s.message,position:"topRight"})}}function C(t){return t.map(({name:s})=>`<li class="categories__item">
   <button class="categories__btn" type="button">${s}</button></li>`).join("")}const B=async()=>{const t=await h();t.unshift({name:"ALL"}),r.categoriesList.insertAdjacentHTML("beforeend",C(t))};function f(t){return t.map(({id:s,images:e,description:l,title:u,brand:o,category:c,price:n})=>`<li class="products__item" data-id="${s}">
    <img class="products__image" src="${e[0]}" alt="${l}"/>
    <p class="products__title">${u}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${o}</p>
    <p class="products__category">Category:${c} </p>
    <p class="products__price">Price:${n} $</p>
 </li>
`).join("")}const v=async()=>{const t=await y();r.productsList.insertAdjacentHTML("beforeend",f(t))};function A(t){r.productsList.insertAdjacentHTML("beforeend",f(t))}function x(t){r.productsList.innerHTML="",r.productsList.insertAdjacentHTML("beforeend",f(t))}function S({images:t,description:s,title:e,tags:l,returnPolicy:u,price:o,shippingInformation:c}){return`<img class="modal-product__img" src="${t[0]}" alt="${s}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${l}</ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping:${c}</p>
        <p class="modal-product__return-policy">Return Policy:${u}</p>
        <p class="modal-product__price">Price:${o} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
`}let p=null,m=null;const E=async t=>{const s=t.target;if(!s.closest(".products__item"))return;const e=+s.closest(".products__item").dataset.id,l=await L(e),u=S(l);r.modalProduct.innerHTML=u,r.modal.classList.add("modal--is-open");let o=JSON.parse(localStorage.getItem(i.CARD_KEY))||[];const c=document.querySelector(".modal-product__btn--cart");c.textContent=o.includes(e)?"Remove from Cart":"Add to Cart",p=()=>{o.includes(e)?(c.textContent="Add to Cart",o=o.filter(g=>g!==e),localStorage.setItem(i.CARD_KEY,JSON.stringify(o)),r.itemsValue.textContent=o.length):(c.textContent="Remove from Cart",o.push(e),localStorage.setItem(i.CARD_KEY,JSON.stringify(o)),r.itemsValue.textContent=o.length)},c.addEventListener("click",p);const n=document.querySelector(".modal-product__btn--wishlist");let a=JSON.parse(localStorage.getItem(i.WISH_KEY))||[];n.textContent=a.includes(e)?"Remove from Wishlist":"Add to Wishlist",m=()=>{a.includes(e)?(n.textContent="Add to Wishlist",a=a.filter(g=>g!==e),localStorage.setItem(i.WISH_KEY,JSON.stringify(a)),r.itemsWishValue.textContent=a.length):(n.textContent="Remove from Wishlist",a.push(e),localStorage.setItem(i.WISH_KEY,JSON.stringify(a)),r.itemsWishValue.textContent=a.length)},n.addEventListener("click",m)},I=()=>{r.modal.classList.remove("modal--is-open");const t=document.querySelector(".modal-product__btn--cart");t&&p&&(t.removeEventListener("click",p),p=null);const s=document.querySelector(".modal-product__btn--wishlist");s&&m&&(s.removeEventListener("click",m),m=null)};export{x as a,R as b,f as c,y as d,B as e,w as f,I as g,E as h,L as i,A as j,v as p};
//# sourceMappingURL=modal-CK7NpEBn.js.map
