{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/products-api.js","../src/js/render-function.js","../src/js/handlers.js","../src/js/constants.js","../src/js/storage.js","../src/js/modal.js","../src/home.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n  // Lists\n\n  categoriesList: document.querySelector('.categories'),\n  productsList: document.querySelector('.products'),\n  cartSummaryList: document.querySelector('.cart-summary__list'),\n\n  //  div.not-found\n  notFound: document.querySelector('.not-found'),\n\n  // Form\n  searchForm: document.querySelector('.search-form'),\n  resetFormBtn: document.querySelector('.search-form__btn-clear'),\n\n  // Nav\n  totalProductsInCart: document.querySelector('.nav__count'),\n\n  // Modal\n  modal: document.querySelector('.modal'),\n  modalProduct: document.querySelector('.modal-product'),\n  modalCloseBtn: document.querySelector('.modal__close-btn'),\n  wishListBtn: document.querySelector('.modal-product__btn--wishlist'),\n  cardListBtn: document.querySelector('.modal-product__btn--cart'),\n};\n","// Функції для роботи з бекендом\n\nimport axios from 'axios';\nimport iziToast from 'izitoast';\n\naxios.defaults.baseURL = 'https://dummyjson.com';\n\nexport async function fetchCategories() {\n  try {\n    const { data } = await axios('/products/categories');\n\n    return data;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n\nexport async function fetchProducts(currentPage = 1) {\n  const url = `/products?limit=12&skip=${(currentPage - 1) * 12}`;\n  try {\n    const { data } = await axios(url);\n\n    return data.products;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n\nexport async function fetchProductByCategory(category, currentPage = 1) {\n  try {\n    const { data } = await axios(\n      `/products/category/${category}?limit=12&skip=${(currentPage - 1) * 12}`\n    );\n    return data.products;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n\nexport async function fetchProductById(id) {\n  try {\n    const { data } = await axios(`/products/${id}`);\n    return data;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n\nexport async function fetchProductByName(name) {\n  try {\n    const { data } = await axios(`/products/search?q=${name}&limit=12`);\n    return data.products;\n  } catch (error) {\n    iziToast.error({ message: error.message, position: 'topRight' });\n  }\n}\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport { refs } from './refs';\nimport {\n  fetchCategories,\n  fetchProductByCategory,\n  fetchProducts,\n} from './products-api';\n\nexport function createMarkupCategoriesList(arr) {\n  return arr\n    .map(\n      ({ name }) => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${name}</button></li>`\n    )\n    .join('');\n}\n\nexport const categoryList = async () => {\n  const data = await fetchCategories();\n  data.unshift({ name: 'ALL' });\n  refs.categoriesList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupCategoriesList(data)\n  );\n};\n\nexport function createMarkupProductsList(arr) {\n  return arr\n    .map(\n      ({\n        id,\n        images,\n        description,\n        title,\n        brand,\n        category,\n        price,\n      }) => `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${images[0]}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n    <p class=\"products__category\">Category:${category} </p>\n    <p class=\"products__price\">Price:${price} $</p>\n </li>\n`\n    )\n    .join('');\n}\n\nexport const productsList = async () => {\n  const data = await fetchProducts();\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(data)\n  );\n};\n\nexport function productsListByCategory(data) {\n  refs.productsList.innerHTML = '';\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(data)\n  );\n}\n\nexport function modalProductById({\n  images,\n  description,\n  title,\n  tags,\n  returnPolicy,\n  price,\n  shippingInformation,\n}) {\n  return `<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${description}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tags}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy:${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price:${price} $</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n`;\n}\n","// Функції, які передаються колбеками в addEventListners\n\nimport {\n  fetchProductByCategory,\n  fetchProductById,\n  fetchProductByName,\n  fetchProducts,\n} from './products-api';\nimport { refs } from './refs';\nimport {\n  categoryList,\n  createMarkupProductsList,\n  modalProductById,\n  productsList,\n  productsListByCategory,\n} from './render-function';\n\nexport const handleClickOnCategory = async event => {\n  const categoryBtn = event.target;\n  const buttons = event.currentTarget.querySelectorAll('.categories__btn');\n  buttons.forEach(btn => btn.classList.remove('categories__btn--active'));\n  categoryBtn.classList.add('categories__btn--active');\n  const categoryName = categoryBtn.textContent;\n\n  if (!categoryBtn.classList.contains('categories__btn')) {\n    return;\n  } else if (categoryName === 'ALL') {\n    productsList();\n  }\n\n  const categoryProducts = await fetchProductByCategory(categoryName);\n  if (categoryProducts.length === 0) {\n    refs.notFound.classList.add('not-found--visible');\n  }\n  productsListByCategory(categoryProducts);\n};\n\nexport async function searchProduct(event) {\n  event.preventDefault();\n  const productName = event.target.elements.searchValue.value.trim();\n  if (productName.length === 0) {\n    alert(\"Input shouldn't be empty!\");\n  }\n  const product = await fetchProductByName(productName);\n  if (product.length === 0) {\n    refs.categoriesList.innerHTML = '';\n    refs.notFound.classList.add('not-found--visible');\n    refs.searchForm.reset();\n  }\n  refs.productsList.innerHTML = '';\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(product)\n  );\n}\n\nexport const resetForm = async () => {\n  refs.searchForm.reset();\n  const products = await fetchProducts();\n  refs.productsList.innerHTML = '';\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(products)\n  );\n};\n","//Константи\n\nexport const STORAGE_KEYS = {\n  CARD_KEY: 'cart',\n  WISH_KEY: 'wishlist',\n};\n","//Робота з loacalStorage\n\nimport { STORAGE_KEYS } from './constants';\nimport { refs } from './refs';\n\nlet wishList = [];\n\nexport const addToCart = id => {\n  let cartList = JSON.parse(localStorage.getItem(STORAGE_KEYS.CARD_KEY)) || [];\n\n  if (!cartList.includes(id)) {\n    refs.cardListBtn.textContent = 'Remove from Cart';\n    cartList.push(id);\n  }\n  //   refs.totalProductsInCart += 1;\n  localStorage.setItem(STORAGE_KEYS.CARD_KEY, JSON.stringify(cartList));\n};\n\nexport const removeFromCart = id => {\n  let cartList = JSON.parse(localStorage.getItem(STORAGE_KEYS.CARD_KEY)) || [];\n\n  if (cartList.includes(id)) {\n    refs.cardListBtn.textContent = 'Add to Cart';\n    cartList = cartList.slice(1, [id]);\n    // refs.totalProductsInCart -= 1;\n    localStorage.setItem(STORAGE_KEYS.CARD_KEY, JSON.stringify(cartList));\n  }\n};\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\n\nimport { STORAGE_KEYS } from './constants';\nimport { fetchProductById } from './products-api';\nimport { refs } from './refs';\nimport { modalProductById } from './render-function';\nimport { addToCart, removeFromCart } from './storage';\n\nexport const handleClickOnProductCard = async event => {\n  const productCard = event.target;\n  if (!productCard.closest('.products__item')) {\n    return;\n  }\n  const id = productCard.closest('.products__item').dataset.id;\n  const productById = await fetchProductById(id);\n  const productModalWindow = modalProductById(productById);\n\n  refs.modalProduct.innerHTML = productModalWindow;\n  refs.modal.classList.add('modal--is-open');\n\n  let cartList = JSON.parse(localStorage.getItem(STORAGE_KEYS.CARD_KEY)) || [];\n  if (cartList.includes(id)) {\n    // refs.totalProductsInCart.textContent = cartList.length;\n    refs.cardListBtn.textContent = 'Remove from Cart';\n    refs.cardListBtn.addEventListener('click', () => removeFromCart(id));\n  } else {\n    // refs.totalProductsInCart.textContent = cartList.length;\n    refs.cardListBtn.textContent = 'Add to Cart';\n    refs.cardListBtn.addEventListener('click', () => {\n      addToCart(id);\n    });\n  }\n};\nexport const closeModal = () => {\n  refs.modal.classList.remove('modal--is-open');\n};\n","//Логіка сторінки Home\n\nimport { refs } from './js/refs';\n\nimport { categoryList, productsList } from './js/render-function';\nimport { handleClickOnCategory, resetForm, searchProduct } from './js/handlers';\n\nimport { closeModal, handleClickOnProductCard } from './js/modal';\n\ncategoryList();\nproductsList();\nrefs.categoriesList.addEventListener('click', handleClickOnCategory);\nrefs.productsList.addEventListener('click', handleClickOnProductCard);\nrefs.modalCloseBtn.addEventListener('click', closeModal);\nrefs.searchForm.addEventListener('submit', searchProduct);\nrefs.resetFormBtn.addEventListener('click', resetForm);\n"],"names":["refs","axios","fetchCategories","data","error","iziToast","fetchProducts","currentPage","url","fetchProductByCategory","category","fetchProductById","id","fetchProductByName","name","createMarkupCategoriesList","arr","categoryList","createMarkupProductsList","images","description","title","brand","price","productsList","productsListByCategory","modalProductById","tags","returnPolicy","shippingInformation","handleClickOnCategory","event","categoryBtn","btn","categoryName","categoryProducts","searchProduct","productName","product","resetForm","products","STORAGE_KEYS","addToCart","cartList","removeFromCart","handleClickOnProductCard","productCard","productById","productModalWindow","closeModal"],"mappings":"2FAEO,MAAMA,EAAO,CAGlB,eAAgB,SAAS,cAAc,aAAa,EACpD,aAAc,SAAS,cAAc,WAAW,EAChD,gBAAiB,SAAS,cAAc,qBAAqB,EAG7D,SAAU,SAAS,cAAc,YAAY,EAG7C,WAAY,SAAS,cAAc,cAAc,EACjD,aAAc,SAAS,cAAc,yBAAyB,EAG9D,oBAAqB,SAAS,cAAc,aAAa,EAGzD,MAAO,SAAS,cAAc,QAAQ,EACtC,aAAc,SAAS,cAAc,gBAAgB,EACrD,cAAe,SAAS,cAAc,mBAAmB,EACzD,YAAa,SAAS,cAAc,+BAA+B,EACnE,YAAa,SAAS,cAAc,2BAA2B,CACjE,ECpBAC,EAAM,SAAS,QAAU,wBAElB,eAAeC,GAAkB,CACtC,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMF,EAAM,sBAAsB,EAEnD,OAAOE,CACR,OAAQC,EAAO,CACdC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,UAAU,CAAE,CAChE,CACH,CAEO,eAAeE,EAAcC,EAAc,EAAG,CACnD,MAAMC,EAAM,4BAA4BD,EAAc,GAAK,EAAE,GAC7D,GAAI,CACF,KAAM,CAAE,KAAAJ,CAAM,EAAG,MAAMF,EAAMO,CAAG,EAEhC,OAAOL,EAAK,QACb,OAAQC,EAAO,CACdC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,UAAU,CAAE,CAChE,CACH,CAEO,eAAeK,EAAuBC,EAAUH,EAAc,EAAG,CACtE,GAAI,CACF,KAAM,CAAE,KAAAJ,CAAM,EAAG,MAAMF,EACrB,sBAAsBS,CAAQ,mBAAmBH,EAAc,GAAK,EAAE,EAC5E,EACI,OAAOJ,EAAK,QACb,OAAQC,EAAO,CACdC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,UAAU,CAAE,CAChE,CACH,CAEO,eAAeO,EAAiBC,EAAI,CACzC,GAAI,CACF,KAAM,CAAE,KAAAT,CAAI,EAAK,MAAMF,EAAM,aAAaW,CAAE,EAAE,EAC9C,OAAOT,CACR,OAAQC,EAAO,CACdC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,UAAU,CAAE,CAChE,CACH,CAEO,eAAeS,EAAmBC,EAAM,CAC7C,GAAI,CACF,KAAM,CAAE,KAAAX,CAAM,EAAG,MAAMF,EAAM,sBAAsBa,CAAI,WAAW,EAClE,OAAOX,EAAK,QACb,OAAQC,EAAO,CACdC,EAAS,MAAM,CAAE,QAASD,EAAM,QAAS,SAAU,UAAU,CAAE,CAChE,CACH,CC9CO,SAASW,EAA2BC,EAAK,CAC9C,OAAOA,EACJ,IACC,CAAC,CAAE,KAAAF,CAAI,IAAO;AAAA,mDAC+BA,CAAI,gBAClD,EACA,KAAK,EAAE,CACZ,CAEO,MAAMG,EAAe,SAAY,CACtC,MAAMd,EAAO,MAAMD,IACnBC,EAAK,QAAQ,CAAE,KAAM,KAAO,CAAA,EAC5BH,EAAK,eAAe,mBAClB,YACAe,EAA2BZ,CAAI,CACnC,CACA,EAEO,SAASe,EAAyBF,EAAK,CAC5C,OAAOA,EACJ,IACC,CAAC,CACC,GAAAJ,EACA,OAAAO,EACA,YAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAZ,EACA,MAAAa,CACR,IAAY,uCAAuCX,CAAE;AAAA,wCACbO,EAAO,CAAC,CAAC,UAAUC,CAAW;AAAA,iCACrCC,CAAK;AAAA,kFAC4CC,CAAK;AAAA,6CAC1CZ,CAAQ;AAAA,uCACda,CAAK;AAAA;AAAA,CAGvC,EACA,KAAK,EAAE,CACZ,CAEO,MAAMC,EAAe,SAAY,CACtC,MAAMrB,EAAO,MAAMG,IACnBN,EAAK,aAAa,mBAChB,YACAkB,EAAyBf,CAAI,CACjC,CACA,EAEO,SAASsB,EAAuBtB,EAAM,CAC3CH,EAAK,aAAa,UAAY,GAC9BA,EAAK,aAAa,mBAChB,YACAkB,EAAyBf,CAAI,CACjC,CACA,CAEO,SAASuB,EAAiB,CAC/B,OAAAP,EACA,YAAAC,EACA,MAAAC,EACA,KAAAM,EACA,aAAAC,EACA,MAAAL,EACA,oBAAAM,CACF,EAAG,CACD,MAAO,wCAAwCV,EAAO,CAAC,CAAC,UAAUC,CAAW;AAAA;AAAA,0CAErCC,CAAK;AAAA,0CACLM,CAAI;AAAA,gDACEP,CAAW;AAAA,kEACOS,CAAmB;AAAA,gEACrBD,CAAY;AAAA,gDAC5BL,CAAK;AAAA;AAAA;AAAA,CAIrD,CCrEO,MAAMO,EAAwB,MAAMC,GAAS,CAClD,MAAMC,EAAcD,EAAM,OACVA,EAAM,cAAc,iBAAiB,kBAAkB,EAC/D,QAAQE,GAAOA,EAAI,UAAU,OAAO,yBAAyB,CAAC,EACtED,EAAY,UAAU,IAAI,yBAAyB,EACnD,MAAME,EAAeF,EAAY,YAEjC,GAAKA,EAAY,UAAU,SAAS,iBAAiB,EAE1CE,IAAiB,OAC1BV,QAFA,QAKF,MAAMW,EAAmB,MAAM1B,EAAuByB,CAAY,EAC9DC,EAAiB,SAAW,GAC9BnC,EAAK,SAAS,UAAU,IAAI,oBAAoB,EAElDyB,EAAuBU,CAAgB,CACzC,EAEO,eAAeC,EAAcL,EAAO,CACzCA,EAAM,eAAc,EACpB,MAAMM,EAAcN,EAAM,OAAO,SAAS,YAAY,MAAM,OACxDM,EAAY,SAAW,GACzB,MAAM,2BAA2B,EAEnC,MAAMC,EAAU,MAAMzB,EAAmBwB,CAAW,EAChDC,EAAQ,SAAW,IACrBtC,EAAK,eAAe,UAAY,GAChCA,EAAK,SAAS,UAAU,IAAI,oBAAoB,EAChDA,EAAK,WAAW,SAElBA,EAAK,aAAa,UAAY,GAC9BA,EAAK,aAAa,mBAChB,YACAkB,EAAyBoB,CAAO,CACpC,CACA,CAEO,MAAMC,EAAY,SAAY,CACnCvC,EAAK,WAAW,QAChB,MAAMwC,EAAW,MAAMlC,IACvBN,EAAK,aAAa,UAAY,GAC9BA,EAAK,aAAa,mBAChB,YACAkB,EAAyBsB,CAAQ,CACrC,CACA,EC9DaC,EAAe,CAC1B,SAAU,OACV,SAAU,UACZ,ECEaC,EAAY9B,GAAM,CAC7B,IAAI+B,EAAW,KAAK,MAAM,aAAa,QAAQF,EAAa,QAAQ,CAAC,GAAK,GAErEE,EAAS,SAAS/B,CAAE,IACvBZ,EAAK,YAAY,YAAc,mBAC/B2C,EAAS,KAAK/B,CAAE,GAGlB,aAAa,QAAQ6B,EAAa,SAAU,KAAK,UAAUE,CAAQ,CAAC,CACtE,EAEaC,EAAiBhC,GAAM,CAClC,IAAI+B,EAAW,KAAK,MAAM,aAAa,QAAQF,EAAa,QAAQ,CAAC,GAAK,GAEtEE,EAAS,SAAS/B,CAAE,IACtBZ,EAAK,YAAY,YAAc,cAC/B2C,EAAWA,EAAS,MAAM,EAAG,CAAC/B,CAAE,CAAC,EAEjC,aAAa,QAAQ6B,EAAa,SAAU,KAAK,UAAUE,CAAQ,CAAC,EAExE,ECnBaE,EAA2B,MAAMd,GAAS,CACrD,MAAMe,EAAcf,EAAM,OAC1B,GAAI,CAACe,EAAY,QAAQ,iBAAiB,EACxC,OAEF,MAAMlC,EAAKkC,EAAY,QAAQ,iBAAiB,EAAE,QAAQ,GACpDC,EAAc,MAAMpC,EAAiBC,CAAE,EACvCoC,EAAqBtB,EAAiBqB,CAAW,EAEvD/C,EAAK,aAAa,UAAYgD,EAC9BhD,EAAK,MAAM,UAAU,IAAI,gBAAgB,GAE1B,KAAK,MAAM,aAAa,QAAQyC,EAAa,QAAQ,CAAC,GAAK,IAC7D,SAAS7B,CAAE,GAEtBZ,EAAK,YAAY,YAAc,mBAC/BA,EAAK,YAAY,iBAAiB,QAAS,IAAM4C,EAAehC,CAAE,CAAC,IAGnEZ,EAAK,YAAY,YAAc,cAC/BA,EAAK,YAAY,iBAAiB,QAAS,IAAM,CAC/C0C,EAAU9B,CAAE,CAClB,CAAK,EAEL,EACaqC,EAAa,IAAM,CAC9BjD,EAAK,MAAM,UAAU,OAAO,gBAAgB,CAC9C,EC1BAiB,IACAO,IACAxB,EAAK,eAAe,iBAAiB,QAAS8B,CAAqB,EACnE9B,EAAK,aAAa,iBAAiB,QAAS6C,CAAwB,EACpE7C,EAAK,cAAc,iBAAiB,QAASiD,CAAU,EACvDjD,EAAK,WAAW,iBAAiB,SAAUoC,CAAa,EACxDpC,EAAK,aAAa,iBAAiB,QAASuC,CAAS"}