{"version":3,"file":"index.js","sources":["../src/js/handlers.js","../src/js/storage.js","../src/js/modal.js","../src/home.js"],"sourcesContent":["// Функції, які передаються колбеками в addEventListners\n\nimport {\n  fetchProductByCategory,\n  fetchProductById,\n  fetchProductByName,\n  fetchProducts,\n} from './products-api';\nimport { refs } from './refs';\nimport {\n  categoryList,\n  createMarkupProductsList,\n  modalProductById,\n  productsList,\n  productsListByCategory,\n} from './render-function';\n\nexport const handleClickOnCategory = async event => {\n  const categoryBtn = event.target;\n  const buttons = event.currentTarget.querySelectorAll('.categories__btn');\n  buttons.forEach(btn => btn.classList.remove('categories__btn--active'));\n  categoryBtn.classList.add('categories__btn--active');\n  const categoryName = categoryBtn.textContent;\n\n  if (!categoryBtn.classList.contains('categories__btn')) {\n    return;\n  } else if (categoryName === 'ALL') {\n    productsList();\n  }\n\n  const categoryProducts = await fetchProductByCategory(categoryName);\n  if (categoryProducts.length === 0) {\n    refs.notFound.classList.add('not-found--visible');\n  }\n  productsListByCategory(categoryProducts);\n};\n\nexport async function searchProduct(event) {\n  event.preventDefault();\n  const productName = event.target.elements.searchValue.value.trim();\n  if (productName.length === 0) {\n    alert(\"Input shouldn't be empty!\");\n  }\n  const product = await fetchProductByName(productName);\n  if (product.length === 0) {\n    refs.categoriesList.innerHTML = '';\n    refs.notFound.classList.add('not-found--visible');\n    refs.searchForm.reset();\n  }\n  refs.productsList.innerHTML = '';\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(product)\n  );\n}\n\nexport const resetForm = async () => {\n  refs.searchForm.reset();\n  const products = await fetchProducts();\n  refs.productsList.innerHTML = '';\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsList(products)\n  );\n};\n","//Робота з loacalStorage\n\nimport { STORAGE_KEYS } from './constants';\nimport { refs } from './refs';\n\nlet wishList = [];\n\nexport const addToCart = (id, btn) => {\n  let cartList = JSON.parse(localStorage.getItem(STORAGE_KEYS.CARD_KEY)) || [];\n\n  btn.textContent = 'Remove from Cart';\n  if (!cartList.includes(id)) {\n    cartList.push(id);\n  }\n\n  localStorage.setItem(STORAGE_KEYS.CARD_KEY, JSON.stringify(cartList));\n  refs.totalProductsInCart.textContent = cartList.length;\n};\n\nexport const removeFromCart = (id, btn) => {\n  let cartList = JSON.parse(localStorage.getItem(STORAGE_KEYS.CARD_KEY)) || [];\n\n  btn.textContent = 'Add to Cart';\n  cartList = cartList.filter(currentId => currentId !== id);\n\n  localStorage.setItem(STORAGE_KEYS.CARD_KEY, JSON.stringify(cartList));\n  refs.totalProductsInCart.textContent = cartList.length;\n};\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\n\nimport { STORAGE_KEYS } from './constants';\nimport { fetchProductById } from './products-api';\nimport { refs } from './refs';\nimport { modalProductById } from './render-function';\nimport { addToCart, removeFromCart } from './storage';\n\nlet onCartBtnClick = null;\nexport const handleClickOnProductCard = async event => {\n  const productCard = event.target;\n  if (!productCard.closest('.products__item')) {\n    return;\n  }\n  const id = +productCard.closest('.products__item').dataset.id;\n  const productById = await fetchProductById(id);\n  const productModalWindow = modalProductById(productById);\n\n  refs.modalProduct.innerHTML = productModalWindow;\n  refs.modal.classList.add('modal--is-open');\n\n  let cartList = JSON.parse(localStorage.getItem(STORAGE_KEYS.CARD_KEY)) || [];\n  const cardListBtn = document.querySelector('.modal-product__btn--cart');\n  // Встановлюємо початковий текст кнопки\n  cardListBtn.textContent = cartList.includes(id)\n    ? 'Remove from Cart'\n    : 'Add to Cart';\n\n  // Створюємо функцію обробника та зберігаємо її для подальшого видалення\n  onCartBtnClick = () => {\n    let cartList =\n      JSON.parse(localStorage.getItem(STORAGE_KEYS.CARD_KEY)) || [];\n    if (cartList.includes(id)) {\n      removeFromCart(id, cardListBtn);\n    } else {\n      addToCart(id, cardListBtn);\n    }\n  };\n\n  // Додаємо слухача\n  cardListBtn.addEventListener('click', onCartBtnClick);\n};\nexport const closeModal = () => {\n  refs.modal.classList.remove('modal--is-open');\n  const cardListBtn = document.querySelector('.modal-product__btn--cart');\n  if (cardListBtn && onCartBtnClick) {\n    cardListBtn.removeEventListener('click', onCartBtnClick);\n    onCartBtnClick = null; // обнуляємо, щоб не тримати зайве\n  }\n};\n","//Логіка сторінки Home\n\nimport { refs } from './js/refs';\n\nimport { categoryList, productsList } from './js/render-function';\nimport { handleClickOnCategory, resetForm, searchProduct } from './js/handlers';\n\nimport { closeModal, handleClickOnProductCard } from './js/modal';\n\ncategoryList();\nproductsList();\nrefs.categoriesList.addEventListener('click', handleClickOnCategory);\nrefs.productsList.addEventListener('click', handleClickOnProductCard);\nrefs.modalCloseBtn.addEventListener('click', closeModal);\nrefs.searchForm.addEventListener('submit', searchProduct);\nrefs.resetFormBtn.addEventListener('click', resetForm);\n"],"names":["handleClickOnCategory","event","categoryBtn","btn","categoryName","productsList","categoryProducts","fetchProductByCategory","refs","productsListByCategory","searchProduct","productName","product","fetchProductByName","createMarkupProductsList","resetForm","products","fetchProducts","addToCart","id","cartList","STORAGE_KEYS","removeFromCart","currentId","onCartBtnClick","handleClickOnProductCard","productCard","productById","fetchProductById","productModalWindow","modalProductById","cardListBtn","closeModal","categoryList"],"mappings":"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"}