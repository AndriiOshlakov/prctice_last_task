import"./assets/styles-BK7AYJoX.js";import{p as l,f as m,r as e,a as L,b as g,c as u,d as p,S as a,e as C,m as f,g as y}from"./assets/constants-BCGXSCGp.js";import"./assets/vendor-CJ_tX8LA.js";const _=async s=>{const o=s.target;s.currentTarget.querySelectorAll(".categories__btn").forEach(i=>i.classList.remove("categories__btn--active")),o.classList.add("categories__btn--active");const r=o.textContent;if(o.classList.contains("categories__btn"))r==="ALL"&&l();else return;const n=await m(r);n.length===0&&e.notFound.classList.add("not-found--visible"),L(n)};async function h(s){s.preventDefault();const o=s.target.elements.searchValue.value.trim();o.length===0&&alert("Input shouldn't be empty!");const t=await g(o);t.length===0&&(e.categoriesList.innerHTML="",e.notFound.classList.add("not-found--visible"),e.searchForm.reset()),e.productsList.innerHTML="",e.productsList.insertAdjacentHTML("beforeend",u(t))}const S=async()=>{e.searchForm.reset();const s=await p();e.productsList.innerHTML="",e.productsList.insertAdjacentHTML("beforeend",u(s))},v=(s,o)=>{let t=JSON.parse(localStorage.getItem(a.CARD_KEY))||[];o.textContent="Remove from Cart",t.includes(s)||t.push(s),localStorage.setItem(a.CARD_KEY,JSON.stringify(t)),e.totalProductsInCart.textContent=t.length},E=(s,o)=>{let t=JSON.parse(localStorage.getItem(a.CARD_KEY))||[];o.textContent="Add to Cart",t=t.filter(r=>r!==s),localStorage.setItem(a.CARD_KEY,JSON.stringify(t)),e.totalProductsInCart.textContent=t.length};let c=null;const b=async s=>{const o=s.target;if(!o.closest(".products__item"))return;const t=+o.closest(".products__item").dataset.id,r=await C(t),n=f(r);e.modalProduct.innerHTML=n,e.modal.classList.add("modal--is-open");let i=JSON.parse(localStorage.getItem(a.CARD_KEY))||[];const d=document.querySelector(".modal-product__btn--cart");d.textContent=i.includes(t)?"Remove from Cart":"Add to Cart",c=()=>{(JSON.parse(localStorage.getItem(a.CARD_KEY))||[]).includes(t)?E(t,d):v(t,d)},d.addEventListener("click",c)},A=()=>{e.modal.classList.remove("modal--is-open");const s=document.querySelector(".modal-product__btn--cart");s&&c&&(s.removeEventListener("click",c),c=null)};y();l();e.categoriesList.addEventListener("click",_);e.productsList.addEventListener("click",b);e.modalCloseBtn.addEventListener("click",A);e.searchForm.addEventListener("submit",h);e.resetFormBtn.addEventListener("click",S);
//# sourceMappingURL=index.js.map
